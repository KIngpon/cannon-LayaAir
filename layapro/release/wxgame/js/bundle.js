!function(){"use strict";class e{constructor(){}static init(){Laya.ClassUtils.regClass}}e.width=640,e.height=1136,e.scaleMode="fixedwidth",e.screenMode="none",e.alignV="top",e.alignH="left",e.startScene="",e.sceneRoot="",e.debug=!1,e.stat=!1,e.physicsDebug=!1,e.exportSceneToJson=!0,e.init();class a{constructor(){this.fixedTimeStep=1/60,this.maxSubSteps=3,this.world=new CANNON.World,this.world.gravity.set(0,-9.82,0),this.world.broadphase=new CANNON.NaiveBroadphase,Laya.loader.create("res/unitylib/Conventional/SampleScene.ls",Laya.Handler.create(this,e=>{Laya.stage.addChild(e),this.Plane=e.getChildByName("Plane"),this.Cube=e.getChildByName("Cube"),this.init()})),Laya.timer.frameLoop(1,this,this.update)}init(){let e=new CANNON.Material(null);e.friction=100,e.restitution=0,this.sphereBody=new CANNON.Body({mass:1,position:new CANNON.Vec3(0,this.Cube.transform.position.y,0),quaternion:new CANNON.Quaternion(this.Cube.transform.rotation.x,this.Cube.transform.rotation.y,this.Cube.transform.rotation.z,this.Cube.transform.rotation.w),shape:new CANNON.Box(new CANNON.Vec3(.5,.5,.5)),type:CANNON.Body.DYNAMIC}),this.sphereBody.collisionResponse,this.sphereBody.addEventListener("collide",e=>{console.log("a",e)}),this.world.addBody(this.sphereBody);var a=new CANNON.Body({mass:0});a.material=e;var t=new CANNON.Box(new CANNON.Vec3(5,.1,5));a.position=new CANNON.Vec3(0,0,0),a.addShape(t),this.world.addBody(a)}update(){if(this.world.step(this.fixedTimeStep,Laya.timer.delta,this.maxSubSteps),null!=this.Cube){let e=this.Cube.transform.position;e.setValue(this.sphereBody.position.x,this.sphereBody.position.y,this.sphereBody.position.z),this.Cube.transform.position=e,this.Cube.transform.rotation=new Laya.Quaternion(this.sphereBody.quaternion.x,this.sphereBody.quaternion.y,this.sphereBody.quaternion.z,this.sphereBody.quaternion.w)}}}new class{constructor(){window.Laya3D?Laya3D.init(e.width,e.height):Laya.init(e.width,e.height,Laya.WebGL),Laya.Physics&&Laya.Physics.enable(),Laya.DebugPanel&&Laya.DebugPanel.enable(),Laya.stage.scaleMode=e.scaleMode,Laya.stage.screenMode=e.screenMode,Laya.stage.alignV=e.alignV,Laya.stage.alignH=e.alignH,Laya.URL.exportSceneToJson=e.exportSceneToJson,(e.debug||"true"==Laya.Utils.getQueryString("debug"))&&Laya.enableDebugPanel(),e.physicsDebug&&Laya.PhysicsDebugDraw&&Laya.PhysicsDebugDraw.enable(),e.stat&&Laya.Stat.show(),Laya.alertGlobalError=!0,Laya.ResourceVersion.enable("version.json",Laya.Handler.create(this,this.onVersionLoaded),Laya.ResourceVersion.FILENAME_VERSION)}onVersionLoaded(){Laya.AtlasInfoManager.enable("fileconfig.json",Laya.Handler.create(this,this.onConfigLoaded))}onConfigLoaded(){new a}}}();